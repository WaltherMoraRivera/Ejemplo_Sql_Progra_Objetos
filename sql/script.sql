CREATE TABLE CLIENTE (
    ID              NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RUT             VARCHAR2(12),
    DV              CHAR(1),
    NOMBRE          VARCHAR2(100),
    APELLIDO        VARCHAR2(100),
    FECHA_NAC       DATE,
    EMAIL           VARCHAR2(150),
    TELEFONO        VARCHAR2(20),
    DIRECCION       VARCHAR2(250),
    ESTADO_CLIENTE  CHAR(1),
    LIMITE_CREDITO  NUMBER(10,2)
);
INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('11222333', 'K', 'Carlos', 'Pérez', DATE '1985-02-14', 'carlos.perez@example.com', '987654321', 'Av. Central 123', 'A', 1500000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('99888777', '3', 'María', 'López', DATE '1990-07-30', 'maria.lopez@example.com', '912345678', 'Los Robles 45', 'A', 1800000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('77665544', '1', 'Jorge', 'Ramírez', DATE '1982-11-22', 'jorge.ramirez@example.com', '934567812', 'Condell 234', 'I', 900000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('55443322', '9', 'Lucía', 'Gómez', DATE '1995-04-08', 'lucia.gomez@example.com', '945612378', 'Las Violetas 899', 'A', 2200000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('66778899', '5', 'Diego', 'Soto', DATE '1988-09-17', 'diego.soto@example.com', '956128374', 'Av. Los Álamos 1023', 'A', 1250000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('12345678', '2', 'Isabel', 'Martínez', DATE '1993-12-01', 'isabel.martinez@example.com', '987123654', 'Mapocho 221', 'A', 1600000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('23456789', '7', 'Tomás', 'Fuentes', DATE '1987-05-06', 'tomas.fuentes@example.com', '998234567', 'Suecia 345', 'M', 400000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('34567890', 'K', 'Fernanda', 'Araya', DATE '1999-03-15', 'fernanda.araya@example.com', '923456781', 'El Bosque Norte 12', 'A', 2000000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('45678901', '4', 'Paulo', 'Rivas', DATE '1984-01-28', 'paulo.rivas@example.com', '934561278', 'Av. Matta 342', 'I', 700000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('56789012', '8', 'Valentina', 'Moya', DATE '1992-10-19', 'valentina.moya@example.com', '955678123', 'Portugal 567', 'A', 1850000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('67890123', '6', 'Rodrigo', 'Navarro', DATE '1981-06-11', 'rodrigo.navarro@example.com', '912341256', 'Santa Isabel 2301', 'M', 350000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('78901234', '0', 'Camila', 'Urrutia', DATE '1996-09-25', 'camila.urrutia@example.com', '945612345', 'Los Leones 788', 'A', 2100000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('89012345', '1', 'Marcelo', 'Ortega', DATE '1989-08-03', 'marcelo.ortega@example.com', '987654120', 'Irarrázaval 1200', 'A', 1750000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('90123456', '3', 'Teresa', 'Vargas', DATE '1983-04-27', 'teresa.vargas@example.com', '934512987', 'Av. Grecia 501', 'M', 500000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('13579246', '5', 'Sebastián', 'Correa', DATE '1991-02-09', 'sebastian.correa@example.com', '912987654', 'Bellavista 99', 'A', 1650000.00);

INSERT INTO CLIENTE (RUT, DV, NOMBRE, APELLIDO, FECHA_NAC, EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO) VALUES
('24681357', '2', 'Daniela', 'Salinas', DATE '1997-07-12', 'daniela.salinas@example.com', '923498761', 'Av. Kennedy 4500', 'A', 1950000.00);

CREATE OR REPLACE PROCEDURE SP_GET_CLIENTES (
    P_CURSOR OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN P_CURSOR FOR
        SELECT ID,
               RUT,
               DV,
               NOMBRE,
               APELLIDO,
               FECHA_NAC,
               EMAIL,
               TELEFONO,
               DIRECCION,
               ESTADO_CLIENTE,
               LIMITE_CREDITO
        FROM CLIENTE
        ORDER BY ID;
END SP_GET_CLIENTES;
/

CREATE OR REPLACE PROCEDURE SP_GET_CLIENTE_BY_ID (
    P_ID     IN  NUMBER,
    P_CURSOR OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN P_CURSOR FOR
        SELECT ID,
               RUT,
               DV,
               NOMBRE,
               APELLIDO,
               FECHA_NAC,
               EMAIL,
               TELEFONO,
               DIRECCION,
               ESTADO_CLIENTE,
               LIMITE_CREDITO
        FROM CLIENTE
        WHERE ID = P_ID;
END SP_GET_CLIENTE_BY_ID;
/

CREATE OR REPLACE PROCEDURE SP_GET_CLIENTE_BY_RUT (
    P_RUT     IN  NUMBER,
    P_CURSOR OUT SYS_REFCURSOR
)
AS
BEGIN
    OPEN P_CURSOR FOR
        SELECT ID,
               RUT,
               DV,
               NOMBRE,
               APELLIDO,
               FECHA_NAC,
               EMAIL,
               TELEFONO,
               DIRECCION,
               ESTADO_CLIENTE,
               LIMITE_CREDITO
        FROM CLIENTE
        WHERE RUT = P_RUT;
END SP_GET_CLIENTE_BY_RUT;
/

CREATE OR REPLACE PROCEDURE SP_INSERT_CLIENTE (
    P_RUT            IN VARCHAR2,
    P_DV             IN CHAR,
    P_NOMBRE         IN VARCHAR2,
    P_APELLIDO       IN VARCHAR2,
    P_FECHA_NAC      IN DATE,
    P_EMAIL          IN VARCHAR2,
    P_TELEFONO       IN VARCHAR2,
    P_DIRECCION      IN VARCHAR2,
    P_ESTADO_CLIENTE IN CHAR,
    P_LIMITE_CREDITO IN NUMBER,
    P_NEW_ID         OUT NUMBER
)
AS
BEGIN
    INSERT INTO CLIENTE (
        RUT, DV, NOMBRE, APELLIDO, FECHA_NAC,
        EMAIL, TELEFONO, DIRECCION, ESTADO_CLIENTE, LIMITE_CREDITO
    ) VALUES (
        P_RUT, P_DV, P_NOMBRE, P_APELLIDO, P_FECHA_NAC,
        P_EMAIL, P_TELEFONO, P_DIRECCION, P_ESTADO_CLIENTE, P_LIMITE_CREDITO
    )
    RETURNING ID INTO P_NEW_ID;
END SP_INSERT_CLIENTE;
/

CREATE OR REPLACE PROCEDURE SP_UPDATE_CLIENTE (
    P_ID             IN NUMBER,
    P_RUT            IN VARCHAR2,
    P_DV             IN CHAR,
    P_NOMBRE         IN VARCHAR2,
    P_APELLIDO       IN VARCHAR2,
    P_FECHA_NAC      IN DATE,
    P_EMAIL          IN VARCHAR2,
    P_TELEFONO       IN VARCHAR2,
    P_DIRECCION      IN VARCHAR2,
    P_ESTADO_CLIENTE IN CHAR,
    P_LIMITE_CREDITO IN NUMBER
)
AS
BEGIN
    UPDATE CLIENTE
    SET RUT            = P_RUT,
        DV             = P_DV,
        NOMBRE         = P_NOMBRE,
        APELLIDO       = P_APELLIDO,
        FECHA_NAC      = P_FECHA_NAC,
        EMAIL          = P_EMAIL,
        TELEFONO       = P_TELEFONO,
        DIRECCION      = P_DIRECCION,
        ESTADO_CLIENTE = P_ESTADO_CLIENTE,
        LIMITE_CREDITO = P_LIMITE_CREDITO
    WHERE ID = P_ID;
END SP_UPDATE_CLIENTE;
/





CREATE OR REPLACE PROCEDURE SP_DELETE_CLIENTE (
    P_ID IN NUMBER
)
AS
BEGIN
    DELETE FROM CLIENTE WHERE ID = P_ID;
END SP_DELETE_CLIENTE;
/